webpackJsonp([12],{"7QVd":function(e,t){},Avuh:function(e,t,n){"use strict";(function(e){var r=n("Xxa5"),o=n.n(r),a=n("//Fk"),i=n.n(a),s=n("exGp"),l=n.n(s),c=n("3wba"),u=n.n(c);e.regeneratorRuntime=n("Xxa5"),t.a={props:{col:{type:Number,default:2},width:Number,height:{type:String},data:{type:Array,default:[]},gutterWidth:{type:Number,default:10},isTransition:{type:Boolean,default:!0},lazyDistance:{type:Number,default:300},loadDistance:{type:Number,default:300}},data:function(){return{root:null,columns:[],loadmore:!0,timeout:null,lazyTimeout:null,lastScrollTop:0,timer:null,loadedIndex:0,columnWidth:0,isresizing:!1,clientHeight:document.documentElement.clientHeight||document.body.clientHeight,clientWidth:document.documentElement.clientWidth||document.body.clientWidth}},computed:{trueLazyDistance:function(){return this.clientWidth/375*this.lazyDistance},max:function(){return this.clientWidth/375*this.loadDistance}},watch:{col:function(e){var t=this;this.$nextTick(function(){setTimeout(function(){t.init()},300)})},data:function(e,t){var n=this;this.$nextTick(function(){clearTimeout(n.timer),n.timer=setTimeout(function(){if(!n.isresizing&&(e.length<n.loadedIndex&&(n.loadedIndex=0),e.length>t.length||e.length>n.loadedIndex)){if(e.length===t.length)return void n.resize(n.loadedIndex>0?n.loadedIndex:null);n.resize(t.length>0?t.length:null)}},300)})}},methods:{init:function(){this.root=this.$refs.vueWaterfall,this.clearColumn();for(var e=parseInt(this.col),t=0;t<e;t++){var n=document.createElement("div");n.className="vue-waterfall-column",this.width?(n.style.width=this.width+"px",0!=t&&(n.style.marginLeft=this.gutterWidth+"px"),this.columnWidth=this.width):(n.style.width=100/parseInt(e)+"%",this.columnWidth=100/parseInt(e)/100*document.documentElement.clientWidth),this.root||(this.root=this.$refs.vueWaterfall),this.root&&this.root.appendChild(n),this.columns.push(n)}this.resize()},setDomImageHeight:function(e){var t=this;return l()(o.a.mark(function n(){var r,a,s,l,c,u;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.getElementByTagName){n.next=2;break}return n.abrupt("return");case 2:r=e.getElementByTagName("img"),a=0;case 4:if(!(a<r.length)){n.next=20;break}if(s=r[a].getAttribute("lazy-src"),r[a].getAttribute("src")||!s){n.next=17;break}if((l=new Image).src=s,!l.complete){n.next=15;break}c=r[a].offsetWidth||t.columnWidth,u=l.height*c/l.width,r[a].offsetWidth&&(r[a].style.height=u+"px"),n.next=17;break;case 15:return n.next=17,new i.a(function(e,t){l.onload=function(){var t=r[a].offsetWidth||this.columnWidth,n=l.height*t/l.width;r[a].offsetWidth&&(r[a].style.height=n+"px"),e()},l.onerror=function(){e()}});case 17:a++,n.next=4;break;case 20:case"end":return n.stop()}},n,t)}))()},append:function(e){var t=this;return l()(o.a.mark(function n(){var r,a,i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t,!(t.columns.length>0)){n.next=19;break}a=t.columns[0],i=1;case 4:if(!(i<t.columns.length)){n.next=16;break}return n.next=7,r.getHeight(a);case 7:return n.t0=n.sent,n.next=10,r.getHeight(r.columns[i]);case 10:if(n.t1=n.sent,!(n.t0>n.t1)){n.next=13;break}a=r.columns[i];case 13:i++,n.next=4;break;case 16:return a&&a.appendChild(e),n.next=19,t.setDomImageHeight(e);case 19:case"end":return n.stop()}},n,t)}))()},checkImg:function(e){return!!e&&!(!e.getElementsByTagName||!e.getElementsByTagName("img").length)},resize:function(e,t){var n=this;return l()(o.a.mark(function r(){var a,s,c,u;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n.isresizing=!0,a=n,n.$slots.default){r.next=5;break}return n.isresizing=!1,r.abrupt("return");case 5:e||0==e||t?t||(n.loadedIndex=e,t=n.$slots.default.splice(e)):(t=n.$slots.default,n.loadedIndex=0,n.clear()),s=0;case 7:if(!(s<t.length)){r.next=28;break}if(!t[s].elm||!a.checkImg(t[s].elm)){r.next=22;break}if(c=t[s].elm.getElementsByTagName("img"),(u=new Image).src=c[0].src,!u.complete){r.next=18;break}return r.next=15,a.append(t[s].elm);case 15:a.lazyLoad(c),r.next=20;break;case 18:return r.next=20,new i.a(function(e,n){u.onload=l()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.append(t[s].elm);case 2:a.lazyLoad(c),e();case 4:case"end":return n.stop()}},n,this)})),u.onerror=l()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.append(t[s].elm);case 2:a.lazyLoad(c),e();case 4:case"end":return n.stop()}},n,this)}))});case 20:r.next=24;break;case 22:return r.next=24,a.append(t[s].elm);case 24:a.loadedIndex++;case 25:s++,r.next=7;break;case 28:n.isresizing=!1,a.$emit("finish");case 30:case"end":return r.stop()}},r,n)}))()},computedPx:function(e,t){e.style.width=t.width/this.columnWidth},lazyLoad:function(e){if(e||(this.root||(this.root=this.$refs.vueWaterfall),e=this.root&&this.root.getElementsByTagName("img")),e&&!(e.length<0))for(var t=0;t<e.length;t++)e[t].className.match("animation")&&e[t].getAttribute("src")||(e[t].className.match("animation")&&!e[t].getAttribute("src")?(e[t].src=e[t].getAttribute("lazy-src"),e[t].removeAttribute("lazy-src")):e[t].getAttribute("src")&&!e[t].className.match("animation")?e[t].className=e[t].className+" animation":!e[t].getAttribute("src")&&e[t].getBoundingClientRect().top<this.clientHeight+this.trueLazyDistance&&(e[t].src=e[t].getAttribute("lazy-src"),e[t].className=e[t].className+" animation",e[t].removeAttribute("lazy-src")))},clearColumn:function(){this.columns.forEach(function(e){e.remove()}),this.columns=[]},clear:function(){this.columns.forEach(function(e){e.innerHTML=""})},mix:function(){var e=this.$slots.default;e.sort(function(){return Math.random()-.5}),this.resize(0,e)},getHeight:function(e){var t=this;return l()(o.a.mark(function n(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.offsetHeight);case 1:case"end":return t.stop()}},n,t)}))()},emitLoadMore:function(){if(this.root){var e=this,t=this.height?this.root.scrollTop:document.documentElement.scrollTop||document.body.scrollTop,n=this.height?this.root.scrollHeight:document.documentElement.offsetHeight,r=n-t-e.clientHeight;e.$emit("scroll",{scrollHeight:n,scrollTop:t,clientHeight:e.clientHeight,diff:r,time:Date.now()}),r<e.max&&e.loadmore&&n>e.clientHeight?(e.lastScrollTop=t,e.loadmore=!1,e.$emit("loadmore")):r>=e.max&&(e.loadmore=!0),clearTimeout(e.lazyTimeout),e.lazyTimeout=setTimeout(function(){e.lazyLoad()},14)}}},destroyed:function(){this.root&&(this.root.onscroll=null),this.root&&(this.root.onresize=null),window.onscroll=null,window.onresize=null},beforeCreate:function(){var e=this;u.a.$on("forceUpdate",function(){e.resize()}),u.a.$on("mix",function(){e.mix()})},mounted:function(){var e=this;this.$nextTick(function(){e.init();var t=e;e.height?(e.root.onscroll=function(e){t.emitLoadMore()},e.root.addEventListener("touchmove",function(){t.emitLoadMore()})):(window.onscroll=function(e){t.emitLoadMore()},document.addEventListener("touchmove",function(){t.emitLoadMore()}))})}}}).call(t,n("DuR2"))},M0kj:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},o,!1,function(e){n("w4ig")},null,null).exports,i=n("NYxO"),s="";try{localStorage.token&&(s=localStorage.token)}catch(e){}var l="";try{localStorage.id&&(l=localStorage.id)}catch(e){}var c="";try{localStorage.LoginForm&&(c=localStorage.LoginForm)}catch(e){}var u=0;try{localStorage.roleId&&(u=localStorage.roleId)}catch(e){}var m={roleId:u,token:s,LoginForm:c,id:l};n("Ya8g");r.default.use(i.a);var h=new i.a.Store({state:m,mutations:{setToken:function(e,t){e.token=t,localStorage.setItem("token",t)},setId:function(e,t){e.id=t,localStorage.setItem("id",t)},remeberme:function(e,t){e.LoginForm=t,localStorage.setItem("LoginForm",t)},clearToken:function(e){e.token="",localStorage.setItem("token","")},setRoleId:function(e,t){e.roleId=t,localStorage.setItem("roleId",t)}},getters:{token:function(e){return e.token},LoginForm:function(e){return e.LoginForm},id:function(e){return e.id},roleId:function(e){return e.roleId}}}),d=n("/ocq");r.default.use(d.a);var f=new d.a({mode:"hash",routes:[{path:"/",name:"/",component:function(){return n.e(4).then(n.bind(null,"u+76"))},redirect:"/login",children:[{path:"/login",name:"login",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"bk6b"))}},{path:"/register",name:"register",component:function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"rMn2"))}}]},{path:"/main",name:"main",component:function(){return n.e(7).then(n.bind(null,"lKgf"))},redirect:"/home",children:[{path:"/home",name:"home",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"Gh4p"))},meta:{breadcrumb:["主页","任务中心"]}},{path:"/search",name:"search",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"m0zx"))},meta:{from:"search",breadcrumb:["主页","任务查询"]}},{path:"/shop",name:"shop",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"8C7K"))},meta:{isExchanged:!1,breadcrumb:["主页","积分商城"]}},{path:"/user",name:"user",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"6vau"))},meta:{breadcrumb:["主页","个人中心","我的主页"]}},{path:"/myTasks",name:"myTasks",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"m0zx"))},meta:{from:"myTasks",breadcrumb:["主页","个人中心","我的任务"]}},{path:"/postTasks",name:"postTasks",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"m0zx"))},meta:{from:"postTasks",breadcrumb:["主页","管理员","已发布任务"]}},{path:"/exchanged",name:"exchanged",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"8C7K"))},meta:{isExchanged:!0,breadcrumb:["主页","个人中心","已兑清单"]}},{path:"/post",name:"post",component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"B3Ai"))},meta:{breadcrumb:["主页","管理员","发布任务"]}},{path:"/shopmanager",name:"shopmanager",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"jPwu"))},meta:{breadcrumb:["主页","管理员","商城管理"]}}]}]}),g=n("b3L9"),p=n.n(g),b=(n("7QVd"),n("6Hd4")),x=n.n(b);r.default.config.productionTip=!1,r.default.use(x.a),r.default.use(p.a);var v=new r.default({el:"#app",router:f,store:h,components:{App:a},template:"<App/>"});t.default=v},t3cI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Avuh"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"vueWaterfall",staticClass:"vue-waterfall",class:this.isTransition&&"is-transition",style:{height:this.height},attrs:{id:"vueWaterfall"}},[t("div",{staticClass:"slot-box"},[this._t("default")],2)])},staticRenderFns:[]};var a=function(e){n("M0kj")},i=n("VU/8")(r.a,o,!1,a,null,null);t.default=i.exports},w4ig:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e7c4906fd7c18f7ceaa8.js.map